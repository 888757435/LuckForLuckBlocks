-- PVP Trainer Op By Branzz

-- Servi√ßos
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer

-- Vari√°veis globais
local savedPosition = nil
local flying = false
local flightSpeed = 28
local flightConnection = nil
local desyncV1Active = false
local desyncV2Active = false
local hitboxExpanded = false
local originalCharacter = nil
local hitboxPart = nil
local platforms = {}

-- Criar a GUI principal
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "PVPTrainer"
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Frame principal
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 350, 0, 400)
MainFrame.Position = UDim2.new(0.5, -175, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(45, 15, 70)
MainFrame.BackgroundTransparency = 0.1
MainFrame.BorderSizePixel = 0
MainFrame.ClipsDescendants = true
MainFrame.Parent = ScreenGui

-- Arrastar a GUI
local dragStart = nil
local startPos = nil

MainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragStart = input.Position
        startPos = MainFrame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragStart = nil
            end
        end)
    end
end)

MainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement and dragStart then
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, 
                                        startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Barra de t√≠tulo
local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 30)
TitleBar.BackgroundColor3 = Color3.fromRGB(85, 25, 130)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame

-- T√≠tulo
local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(1, -60, 1, 0)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "PVP Trainer Op By Branzz"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 14
Title.Font = Enum.Font.GothamBold
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = TitleBar

-- Bot√£o minimizar
local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Name = "MinimizeButton"
MinimizeButton.Size = UDim2.new(0, 20, 0, 20)
MinimizeButton.Position = UDim2.new(1, -50, 0.5, -10)
MinimizeButton.BackgroundColor3 = Color3.fromRGB(120, 50, 180)
MinimizeButton.Text = "_"
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.TextSize = 16
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.Parent = TitleBar

-- Bot√£o fechar
local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 20, 0, 20)
CloseButton.Position = UDim2.new(1, -25, 0.5, -10)
CloseButton.BackgroundColor3 = Color3.fromRGB(180, 50, 50)
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 14
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Parent = TitleBar

-- Frame minimizado (apenas t√≠tulo)
local MinimizedFrame = Instance.new("Frame")
MinimizedFrame.Name = "MinimizedFrame"
MinimizedFrame.Size = UDim2.new(0, 200, 0, 30)
MinimizedFrame.Position = MainFrame.Position
MinimizedFrame.BackgroundColor3 = Color3.fromRGB(85, 25, 130)
MinimizedFrame.BorderSizePixel = 0
MinimizedFrame.Visible = false
MinimizedFrame.Parent = ScreenGui

-- T√≠tulo na vers√£o minimizada
local MinimizedTitle = Instance.new("TextLabel")
MinimizedTitle.Name = "MinimizedTitle"
MinimizedTitle.Size = UDim2.new(1, -40, 1, 0)
MinimizedTitle.Position = UDim2.new(0, 10, 0, 0)
MinimizedTitle.BackgroundTransparency = 1
MinimizedTitle.Text = "PVP Trainer Op By Branzz"
MinimizedTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizedTitle.TextSize = 12
MinimizedTitle.Font = Enum.Font.GothamBold
MinimizedTitle.TextXAlignment = Enum.TextXAlignment.Left
MinimizedTitle.Parent = MinimizedFrame

-- Bot√£o maximizar na vers√£o minimizada
local MaximizeButton = Instance.new("TextButton")
MaximizeButton.Name = "MaximizeButton"
MaximizeButton.Size = UDim2.new(0, 20, 0, 20)
MaximizeButton.Position = UDim2.new(1, -25, 0.5, -10)
MaximizeButton.BackgroundColor3 = Color3.fromRGB(120, 50, 180)
MaximizeButton.Text = "‚ñ°"
MaximizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MaximizeButton.TextSize = 12
MaximizeButton.Font = Enum.Font.GothamBold
MaximizeButton.Parent = MinimizedFrame

-- Arrastar a vers√£o minimizada
MinimizedFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragStart = input.Position
        startPos = MinimizedFrame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragStart = nil
            end
        end)
    end
end)

MinimizedFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement and dragStart then
        local delta = input.Position - dragStart
        MinimizedFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, 
                                            startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Frame do conte√∫do
local ContentFrame = Instance.new("ScrollingFrame")
ContentFrame.Name = "ContentFrame"
ContentFrame.Size = UDim2.new(1, 0, 1, -30)
ContentFrame.Position = UDim2.new(0, 0, 0, 30)
ContentFrame.BackgroundTransparency = 1
ContentFrame.BorderSizePixel = 0
ContentFrame.ScrollBarThickness = 6
ContentFrame.ScrollBarImageColor3 = Color3.fromRGB(120, 50, 180)
ContentFrame.CanvasSize = UDim2.new(0, 0, 0, 650)
ContentFrame.Parent = MainFrame

-- Container para os bot√µes
local ButtonContainer = Instance.new("Frame")
ButtonContainer.Name = "ButtonContainer"
ButtonContainer.Size = UDim2.new(1, -20, 0, 630)
ButtonContainer.Position = UDim2.new(0, 10, 0, 10)
ButtonContainer.BackgroundTransparency = 1
ButtonContainer.Parent = ContentFrame

-- Fun√ß√£o para criar bot√µes com estilo
function createButton(name, text, position, height)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Size = UDim2.new(1, 0, 0, height)
    button.Position = position
    button.BackgroundColor3 = Color3.fromRGB(65, 25, 100)
    button.Text = text
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.TextSize = 14
    button.Font = Enum.Font.Gotham
    button.AutoButtonColor = false
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 6)
    corner.Parent = button
    
    button.MouseEnter:Connect(function()
        game:GetService("TweenService"):Create(button, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(85, 35, 130)
        }):Play()
    end)
    
    button.MouseLeave:Connect(function()
        game:GetService("TweenService"):Create(button, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(65, 25, 100)
        }):Play()
    end)
    
    return button
end

-- 1. Bot√£o Marcar Posi√ß√£o
local MarkButton = createButton("MarkButton", "Mark POSITION üìç", UDim2.new(0, 0, 0, 0), 35)
MarkButton.Parent = ButtonContainer

local MarkStatus = Instance.new("TextLabel")
MarkStatus.Name = "MarkStatus"
MarkStatus.Size = UDim2.new(1, 0, 0, 20)
MarkStatus.Position = UDim2.new(0, 0, 0, 40)
MarkStatus.BackgroundTransparency = 1
MarkStatus.Text = "Nenhuma posi√ß√£o salva"
MarkStatus.TextColor3 = Color3.fromRGB(200, 200, 200)
MarkStatus.TextSize = 12
MarkStatus.Font = Enum.Font.Gotham
MarkStatus.Parent = ButtonContainer

-- Bot√£o Limpar Posi√ß√£o
local ClearButton = createButton("ClearButton", "Clear PositionüóëÔ∏è", UDim2.new(0, 0, 0, 65), 25)
ClearButton.BackgroundColor3 = Color3.fromRGB(180, 50, 50)
ClearButton.Parent = ButtonContainer

ClearButton.MouseEnter:Connect(function()
    game:GetService("TweenService"):Create(ClearButton, TweenInfo.new(0.2), {
        BackgroundColor3 = Color3.fromRGB(200, 70, 70)
    }):Play()
end)

ClearButton.MouseLeave:Connect(function()
    game:GetService("TweenService"):Create(ClearButton, TweenInfo.new(0.2), {
        BackgroundColor3 = Color3.fromRGB(180, 50, 50)
    }):Play()
end)

-- 2. Voo Livre
local FlightButton = createButton("FlightButton", "V√¥o Livreü¶Ö: OFF", UDim2.new(0, 0, 0, 100), 35)
FlightButton.Parent = ButtonContainer

local FlightIndicator = Instance.new("Frame")
FlightIndicator.Name = "FlightIndicator"
FlightIndicator.Size = UDim2.new(0, 15, 0, 15)
FlightIndicator.Position = UDim2.new(1, -20, 0.5, -7.5)
FlightIndicator.BackgroundColor3 = Color3.fromRGB(180, 50, 50)
FlightIndicator.BorderSizePixel = 0
local flightCorner = Instance.new("UICorner")
flightCorner.CornerRadius = UDim.new(1, 0)
flightCorner.Parent = FlightIndicator
FlightIndicator.Parent = FlightButton

-- Fun√ß√£o de voo
local function toggleFlight()
    flying = not flying
    
    if flying then
        FlightButton.Text = "V√¥o Livreü¶Ö: ON"
        FlightIndicator.BackgroundColor3 = Color3.fromRGB(50, 180, 50)
        
        if flightConnection then
            flightConnection:Disconnect()
        end
        
        flightConnection = RunService.RenderStepped:Connect(function()
            if flying and player.Character then
                local camera = workspace.CurrentCamera
                local rootPart = player.Character:FindFirstChild("HumanoidRootPart")
                
                if camera and rootPart then
                    rootPart.Velocity = camera.CFrame.LookVector * flightSpeed
                end
            end
        end)
    else
        FlightButton.Text = "V√¥o Livreü¶Ö: OFF"
        FlightIndicator.BackgroundColor3 = Color3.fromRGB(180, 50, 50)
        
        if flightConnection then
            flightConnection:Disconnect()
            flightConnection = nil
        end
        
        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            player.Character.HumanoidRootPart.Velocity = Vector3.new(0, 0, 0)
        end
    end
end

-- 3. Teleportar para Posi√ß√£o
local TpButton = createButton("TpButton", "Tp POSITION üìç üåè", UDim2.new(0, 0, 0, 145), 35)
TpButton.Parent = ButtonContainer

-- Fun√ß√£o para criar plataformas
local function createPlatform(position, size)
    local platform = Instance.new("Part")
    platform.Name = "TempPlatform"
    platform.Size = size or Vector3.new(10, 1, 10)
    platform.Position = position
    platform.Anchored = true
    platform.CanCollide = true
    platform.Transparency = 0.5
    platform.Material = EnumMaterial.Neon
    platform.Color = Color3.fromRGB(120, 50, 180)
    platform.Parent = workspace
    
    table.insert(platforms, platform)
    
    task.delay(8, function()
        if platform and platform.Parent then
            platform:Destroy()
        end
    end)
    
    return platform
end

-- 4. Desync v1
local DesyncV1Button = createButton("DesyncV1Button", "Desync v1: OFF", UDim2.new(0, 0, 0, 190), 35)
DesyncV1Button.Parent = ButtonContainer

local DesyncV1Indicator = Instance.new("Frame")
DesyncV1Indicator.Name = "DesyncV1Indicator"
DesyncV1Indicator.Size = UDim2.new(0, 15, 0, 15)
DesyncV1Indicator.Position = UDim2.new(1, -20, 0.5, -7.5)
DesyncV1Indicator.BackgroundColor3 = Color3.fromRGB(180, 50, 50)
DesyncV1Indicator.BorderSizePixel = 0
local desync1Corner = Instance.new("UICorner")
desync1Corner.CornerRadius = UDim.new(1, 0)
desync1Corner.Parent = DesyncV1Indicator
DesyncV1Indicator.Parent = DesyncV1Button

-- 5. Desync v2
local DesyncV2Button = createButton("DesyncV2Button", "Desync v2: OFF", UDim2.new(0, 0, 0, 235), 35)
DesyncV2Button.Parent = ButtonContainer

local DesyncV2Indicator = Instance.new("Frame")
DesyncV2Indicator.Name = "DesyncV2Indicator"
DesyncV2Indicator.Size = UDim2.new(0, 15, 0, 15)
DesyncV2Indicator.Position = UDim2.new(1, -20, 0.5, -7.5)
DesyncV2Indicator.BackgroundColor3 = Color3.fromRGB(180, 50, 50)
DesyncV2Indicator.BorderSizePixel = 0
local desync2Corner = Instance.new("UICorner")
desync2Corner.CornerRadius = UDim.new(1, 0)
desync2Corner.Parent = DesyncV2Indicator
DesyncV2Indicator.Parent = DesyncV2Button

-- 6. Hitbox Expande
local HitboxLabel = Instance.new("TextLabel")
HitboxLabel.Name = "HitboxLabel"
HitboxLabel.Size = UDim2.new(1, 0, 0, 25)
HitboxLabel.Position = UDim2.new(0, 0, 0, 280)
HitboxLabel.BackgroundTransparency = 1
HitboxLabel.Text = "Hitbox Expande:"
HitboxLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
HitboxLabel.TextSize = 14
HitboxLabel.Font = Enum.Font.GothamBold
HitboxLabel.TextXAlignment = Enum.TextXAlignment.Left
HitboxLabel.Parent = ButtonContainer

local HitboxSizeBox = Instance.new("TextBox")
HitboxSizeBox.Name = "HitboxSizeBox"
HitboxSizeBox.Size = UDim2.new(0.7, 0, 0, 30)
HitboxSizeBox.Position = UDim2.new(0, 0, 0, 310)
HitboxSizeBox.BackgroundColor3 = Color3.fromRGB(50, 20, 80)
HitboxSizeBox.TextColor3 = Color3.fromRGB(255, 255, 255)
HitboxSizeBox.Text = "5"
HitboxSizeBox.TextSize = 14
HitboxSizeBox.Font = Enum.Font.Gotham
HitboxSizeBox.PlaceholderText = "Tamanho da hitbox"
HitboxSizeBox.Parent = ButtonContainer

local HitboxCorner = Instance.new("UICorner")
HitboxCorner.CornerRadius = UDim.new(0, 6)
HitboxCorner.Parent = HitboxSizeBox

local HitboxToggleButton = createButton("HitboxToggleButton", "Ativar Hitbox", UDim2.new(0.72, 5, 0, 310), 30)
HitboxToggleButton.Parent = ButtonContainer

-- Conectar eventos dos bot√µes
MarkButton.MouseButton1Click:Connect(function()
    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        savedPosition = player.Character.HumanoidRootPart.Position
        MarkStatus.Text = string.format("Posi√ß√£o salva: (%.1f, %.1f, %.1f)", 
            savedPosition.X, savedPosition.Y, savedPosition.Z)
        MarkStatus.TextColor3 = Color3.fromRGB(50, 180, 50)
    end
end)

ClearButton.MouseButton1Click:Connect(function()
    savedPosition = nil
    MarkStatus.Text = "Nenhuma posi√ß√£o salva"
    MarkStatus.TextColor3 = Color3.fromRGB(200, 200, 200)
end)

FlightButton.MouseButton1Click:Connect(toggleFlight)

TpButton.MouseButton1Click:Connect(function()
    if not savedPosition then
        MarkStatus.Text = "Salve uma posi√ß√£o primeiro!"
        MarkStatus.TextColor3 = Color3.fromRGB(255, 100, 100)
        return
    end
    
    if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then
        return
    end
    
    local rootPart = player.Character.HumanoidRootPart
    local startPos = rootPart.Position
    local direction = (savedPosition - startPos).Unit
    local distance = (savedPosition - startPos).Magnitude
    local steps = math.ceil(distance / 10)
    
    -- Ativar voo temporariamente
    local wasFlying = flying
    if not flying then
        toggleFlight()
    end
    
    -- Criar plataformas ao longo do caminho
    for i = 1, steps do
        local platformPos = startPos + (direction * (i * 10))
        createPlatform(platformPos + Vector3.new(0, -3, 0), Vector3.new(8, 1, 8))
    end
    
    -- Teleportar para a posi√ß√£o
    rootPart.CFrame = CFrame.new(savedPosition)
    
    -- Desativar voo se n√£o estava ativo antes
    if not wasFlying then
        task.wait(0.5)
        toggleFlight()
    end
end)

DesyncV1Button.MouseButton1Click:Connect(function()
    desyncV1Active = not desyncV1Active
    
    if desyncV1Active then
        DesyncV1Button.Text = "Desync v1: ON"
        DesyncV1Indicator.BackgroundColor3 = Color3.fromRGB(50, 180, 50)
        
        -- Salvar personagem original
        originalCharacter = player.Character
        
        -- Resetar personagem
        player.Character:BreakJoints()
        
        -- Criar hitbox invis√≠vel
        task.wait(Players.RespawnTime)
        
        if player.Character then
            for _, part in pairs(player.Character:GetChildren()) do
                if part:IsA("BasePart") then
                    part.Transparency = 1
                    part.CanCollide = false
                end
            end
        end
    else
        DesyncV1Button.Text = "Desync v1: OFF"
        DesyncV1Indicator.BackgroundColor3 = Color3.fromRGB(180, 50, 50)
        
        -- Resetar personagem para o estado normal
        if player.Character then
            player:LoadCharacter()
        end
    end
end)

DesyncV2Button.MouseButton1Click:Connect(function()
    desyncV2Active = not desyncV2Active
    
    if desyncV2Active then
        DesyncV2Button.Text = "Desync v2: ON"
        DesyncV2Indicator.BackgroundColor3 = Color3.fromRGB(50, 180, 50)
        
        -- Aplicar FFlags do arquivo Desync.txt
        local FFlags = {
            GameNetPVHeaderRotationalVelocityZeroCutoffExponent = -5000,
            LargeReplicatorWrite5 = true,
            LargeReplicatorEnabled9 = true,
            AngularVelociryLimit = 360,
            TimestepArbiterVelocityCriteriaThresholdTwoDt = 2147483646,
            S2PhysicsSenderRate = 15000,
            DisableDPIScale = true,
            MaxDataPacketPerSend = 2147483647,
            PhysicsSenderMaxBandwidthBps = 20000,
            TimestepArbiterHumanoidLinearVelThreshold = 21,
            MaxMissedWorldStepsRemembered = -2147483648,
            PlayerHumanoidPropertyUpdateRestrict = true,
            SimDefaultHumanoidTimestepMultiplier = 0,
            StreamJobNOUVolumeLengthCap = 2147483647,
            DebugSendDistInSteps = -2147483648,
            GameNetDontSendRedundantNumTimes = 1,
            CheckPVLinearVelocityIntegrateVsDeltaPositionThresholdPercent = 1,
            CheckPVDifferencesForInterpolationMinVelThresholdStudsPerSecHundredth = 1,
            LargeReplicatorSerializeRead3 = true,
            ReplicationFocusNouExtentsSizeCutoffForPauseStuds = 2147483647,
            CheckPVCachedVelThresholdPercent = 10,
            CheckPVDifferencesForInterpolationMinRotVelThresholdRadsPerSecHundredth = 1,
            GameNetDontSendRedundantDeltaPositionMillionth = 1,
            InterpolationFrameVelocityThresholdMillionth = 5,
            StreamJobNOUVolumeCap = 2147483647,
            InterpolationFrameRotVelocityThresholdMillionth = 5,
            CheckPVCachedRotVelThresholdPercent = 10,
            WorldStepMax = 30,
            InterpolationFramePositionThresholdMillionth = 5,
            TimestepArbiterHumanoidTurningVelThreshold = 1,
            SimOwnedNOUCountThresholdMillionth = 2147483647,
            GameNetPVHeaderLinearVelocityZeroCutoffExponent = -5000,
            NextGenReplicatorEnabledWrite4 = true,
            TimestepArbiterOmegaThou = 1073741823,
            MaxAcceptableUpdateDelay = 1,
            LargeReplicatorSerializeWrite4 = true
        }
        
        for name, value in pairs(FFlags) do
            pcall(function()
                setfflag(tostring(name), tostring(value))
            end)
        end
    else
        DesyncV2Button.Text = "Desync v2: OFF"
        DesyncV2Indicator.BackgroundColor3 = Color3.fromRGB(180, 50, 50)
    end
end)

HitboxToggleButton.MouseButton1Click:Connect(function()
    hitboxExpanded = not hitboxExpanded
    
    if hitboxExpanded then
        local size = tonumber(HitboxSizeBox.Text) or 5
        
        if player.Character then
            -- Criar parte para hitbox expandida
            hitboxPart = Instance.new("Part")
            hitboxPart.Name = "ExpandedHitbox"
            hitboxPart.Size = Vector3.new(size, size, size)
            hitboxPart.Transparency = 0.7
            hitboxPart.Color = Color3.fromRGB(255, 255, 255)
            hitboxPart.Material = EnumMaterial.Neon
            hitboxPart.CanCollide = false
            hitboxPart.Anchored = false
            hitboxPart.Parent = player.Character
            
            -- Conectar ao torso do personagem
            local torso = player.Character:FindFirstChild("Torso") or player.Character:FindFirstChild("UpperTorso")
            if torso then
                local weld = Instance.new("Weld")
                weld.Part0 = torso
                weld.Part1 = hitboxPart
                weld.C0 = CFrame.new(0, 0, 0)
                weld.Parent = hitboxPart
            end
            
            HitboxToggleButton.Text = "Desativar Hitbox"
            HitboxToggleButton.BackgroundColor3 = Color3.fromRGB(50, 180, 50)
        end
    else
        if hitboxPart then
            hitboxPart:Destroy()
            hitboxPart = nil
        end
        
        HitboxToggleButton.Text = "Ativar Hitbox"
        HitboxToggleButton.BackgroundColor3 = Color3.fromRGB(65, 25, 100)
    end
end)

-- Bot√µes da barra de t√≠tulo
MinimizeButton.MouseButton1Click:Connect(function()
    MinimizedFrame.Position = MainFrame.Position
    MinimizedFrame.Visible = true
    MainFrame.Visible = false
end)

MaximizeButton.MouseButton1Click:Connect(function()
    MainFrame.Position = MinimizedFrame.Position
    MainFrame.Visible = true
    MinimizedFrame.Visible = false
end)

CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
    
    -- Limpar todas as conex√µes e partes criadas
    if flightConnection then
        flightConnection:Disconnect()
    end
    
    for _, platform in pairs(platforms) do
        if platform and platform.Parent then
            platform:Destroy()
        end
    end
    
    if hitboxPart then
        hitboxPart:Destroy()
    end
end)

-- Adicionar sombra √† GUI principal
local Shadow = Instance.new("ImageLabel")
Shadow.Name = "Shadow"
Shadow.Size = UDim2.new(1, 10, 1, 10)
Shadow.Position = UDim2.new(0, -5, 0, -5)
Shadow.BackgroundTransparency = 1
Shadow.Image = "rbxassetid://1316045217"
Shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
Shadow.ImageTransparency = 0.8
Shadow.ScaleType = Enum.ScaleType.Slice
Shadow.SliceCenter = Rect.new(10, 10, 118, 118)
Shadow.Parent = MainFrame

-- Adicionar sombra √† vers√£o minimizada
local MinimizedShadow = Instance.new("ImageLabel")
MinimizedShadow.Name = "MinimizedShadow"
MinimizedShadow.Size = UDim2.new(1, 10, 1, 10)
MinimizedShadow.Position = UDim2.new(0, -5, 0, -5)
MinimizedShadow.BackgroundTransparency = 1
MinimizedShadow.Image = "rbxassetid://1316045217"
MinimizedShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
MinimizedShadow.ImageTransparency = 0.8
MinimizedShadow.ScaleType = Enum.ScaleType.Slice
MinimizedShadow.SliceCenter = Rect.new(10, 10, 118, 118)
MinimizedShadow.Parent = MinimizedFrame

-- Adicionar cantos arredondados
local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 8)
MainCorner.Parent = MainFrame

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 8)
TitleCorner.Parent = TitleBar

local MinimizedCorner = Instance.new("UICorner")
MinimizedCorner.CornerRadius = UDim.new(0, 8)
MinimizedCorner.Parent = MinimizedFrame

-- Adicionar a GUI ao PlayerGui
if game:GetService("CoreGui"):FindFirstChild("PVPTrainer") then
    game:GetService("CoreGui").PVPTrainer:Destroy()
end

ScreenGui.Parent = game:GetService("CoreGui")

print("PVP Trainer Op By Branzz carregado com sucesso!")